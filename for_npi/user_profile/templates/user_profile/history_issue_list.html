{% extends "user_profile/base.html" %}

{% block content %}
<div class="container mt-4">
    <h1>List of Issues</h1>
        

<table class="table">
    <thead>
        <form method="get">
            <tr>
                
                    <button class = "btn btn-primary btn-sm" type="submit" id="clearFilters">Wyczyść filtry</button>
                
                <th>Title {{ form.title }}</th>
                <th>Status {{ form.status }}</th>
                <th>Priority {{ form.priority }}</th>
                <th>Line {{ form.line }}</th>
                <th>Machine {{ form.machine }}</th>
                <th>Type {{ form.type_of_issue }}</th>
                <th>Actions</th>
            </tr>
        </form>
    </thead>
    <tbody>
        {% for issue in issues %}
        <tr>
            <td>{{ issue.title }}</td>
            <td>{{ issue.get_status_display }}</td>
            <td>{{ issue.get_priority_display }}</td>
            <td>{{ issue.line }}</td>
            <td>{{ issue.machine }}</td>
            <td>{{ issue.type_of_issue }}</td>
            <td><a href="#" class="btn btn-primary btn-sm">View</a></td>
        </tr>
        {% endfor %}
    </tbody>
</table>


<script type="text/javascript">
    document.getElementById('id_status').onchange = function() {
        this.form.submit();
    };
    document.getElementById('id_priority').onchange = function() {
        this.form.submit();
    };
    document.getElementById('id_line').onchange = function() {
        this.form.submit();
    };
    document.getElementById('id_machine').onchange = function() {
        this.form.submit();
    };
    document.getElementById('id_type_of_issue').onchange = function() {
        this.form.submit();
    }
    document.getElementById('clearFilters').addEventListener('click', function() {
        document.getElementById('id_status').value = ''; 
        document.getElementById('id_priority').value = ''; 
        document.getElementById('id_line').value = '';
        document.getElementById('id_machine').value = '';
        document.getElementById('id_type_of_issue').value = '';

    });
</script>

{% endblock %}